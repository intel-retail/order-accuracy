minio:
  endpoint: minio:9000
  access_key: minioadmin
  secret_key: minioadmin
  secure: false

buckets:
  frames: frames
  selected: selected

video:
  default_source: /videos/sample.mp4
  fps_target: 1

frame_selector:
  top_k: 3
  max_bucket_size: 100  # hard cap on frames per order; prevents runaway accumulation during VLM/OVMS hangs
  min_item_frames: 2    # minimum frames with YOLO item detections required before calling VLM
                        # NOTE: set to 2 (not 3) because order 925's video section is only ~6s
                        # giving just 5-8 frames per cycle; 3 would skip too many valid buckets
  non_food_labels:      # YOLO classes that indicate order slips / non-food objects; excluded from frame scoring
    - remote
    - cell phone
    - book
    - laptop  # 3 frames keeps OVMS stable; diversity selection ensures coverage
  poll_interval_sec: 1.5
  skip_labels:
    - hand
    # 'person' intentionally excluded: the packing worker is always visible
    # during food-placement and would cause all food frames to be dropped.
  min_frames_per_order: 1  # Reduced to capture brief orders like 384
  min_frames_before_finalize: 5  # Wait for at least N frames before finalizing an order

vlm:
  # Backend type: 'embedded' (local OpenVINO GenAI) or 'ovms' (OpenVINO Model Server)
  backend: ovms  # Using OVMS backend for VLM inference
  
  # Embedded backend configuration (used when backend: embedded)
  model_path: /model/Qwen2.5-VL-7B-Instruct
  device: GPU
  
  # OVMS backend configuration (used when backend: ovms)
  ovms_endpoint: http://ovms-vlm:8000
  ovms_model: Qwen/Qwen2.5-VL-7B-Instruct

  # Common configuration
  endpoint: http://order-accuracy:8000/run_vlm
  retries: 5
  timeout_sec: 360  # Increased: 7B VLM on iGPU takes ~300s per inference
  max_new_tokens: 100  # Item list is ~30 tokens max; 512 caused KV-cache overflow â†’ OVMS crash
  temperature: 0.2
  model: Qwen/Qwen2.5-VL-7B-Instruct
  precision: int8

# Semantic Comparison Service Configuration
semantic_service:
  endpoint: http://semantic-service:8080
  enabled: true  # Enabled - using external semantic comparison service
  timeout: 30
  fallback_to_local: true  # Use local semantic matching if service unavailable

ocr:
  prefer_digits: 3

inventory:
  - green apple
  - apple
  - water bottle
  - coke 2 liter bottle
  - coke large bottle
  - coke bottle
  - pepsi can
  - yellow banana
  - banana
